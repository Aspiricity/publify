<%= form_tag url: @article.comment_url, position: :bottom, remote: true, update: {success: 'commentList'}, loading: "loading()", complete: "complete(request)", failure: "failure(request)", html: { id: "commentform", class: "commentform" } do %>
  <div class="comment-box">
  <div id="errors"></div>
  <div id="preview" style="display: none"></div>

  <a name="respond"></a>
      <p><label for="comment_author"><%= t(".your_name")%></label>
      <%= text_field "comment", "author", size: 20 %>
      <small>
        <%= link_to '#', onclick: "$('.optional_field').toggle()" do %>
          (<%= t(".leave_url_email") %> &#187;)
        <%- end %>
      </small>
    </p>
    <p class="optional_field">
      <label for="comment_url"><%= t(".your_blog")%></label>
      <%= text_field "comment", "url" %>
    </p>
    <p class="optional_field">
      <label for="comment_email"><%= t(".your_email")%></label>
      <%= text_field "comment", "email" %>
    </p>
    <p>
      <label for="comment_body"><%= t(".your_message")%></label>
      <%= content_tag('small', link_to(t(".textile_enabled"), "http://hobix.com/textile/")) if this_blog.comment_text_filter.include? 'textile' %>
      <%= content_tag('small', link_to(t(".markdown_enabled"), "http://daringfireball.net/projects/markdown/")) if this_blog.comment_text_filter.include? 'markdown' %>
    </p>
      <p>
        <%= text_area "comment", "body" %>
      </p>
    <p id="frm-btns">


      <span id="comment_loading" style="display:none;"><%= image_tag "spinner.gif" %></span>
      <a href="#" onclick="new Ajax.Updater('preview', '<%= @article.preview_comment_url %>',  {asynchronous:true, evalScripts:true, parameters:Form.serialize('commentform'), onComplete:function(request){Element.show('preview')}}); return false;"><%= t(".preview_comment")%></a>
      <input type="submit" name="submit" id="form-submit-button" value="submit" class="button" />&nbsp;&nbsp;
    </p>


</div>
<%- end %>
